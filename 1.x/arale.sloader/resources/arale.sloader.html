<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
        <title>Arale.loader</title>
        <script type="text/javascript" charset="utf-8">
            araleConfig = {
                    combo_host: 'http://assets.dev.alipay.net',
                    debug: true,
                    depSrc: true,
                    combo_path: '/ar/??'

                    //一些个性化配置
                    //combo_host: 'static.p3.alipay.net',
            }
                
        </script>
        <!--
        <script type="text/javascript" charset="utf-8" src='./target/${artifactId}-${version}.js'></script>
        <script type="text/javascript" charset="utf-8" src='../resources/seajs/build/sea-debug.js'></script>
        <script type="text/javascript" charset="utf-8" src='./arale.sloader-2.0-SNAPSHOT-src.js'></script>
        -->
        <script type="text/javascript" charset="utf-8" src="http://assets.dev.alipay.net/ar/${artifactId}-${version}-src.js"></script>
        <script type="text/javascript" charset="utf-8">
            seajs.config({
                base: 'http://assets.dev.alipay.net/??',
                preload: ['arale.sp-combo-2.0-SNAPSHOT.js'],
                charset: 'utf-8',
                timeout: 20000,
                debug: true
            });
        </script>
    </head>
    <body>
        <a href="#" onclick="testRequire2()">测试加载arale.event模块</a></br></br>
        <a href="#" onclick="testRequireXbox()">测试加载xbox</a></br></br>
        <a href="#" onclick="testRequireAutocomplete()">测试加载autocomplete</a></br></br>
        <div id="d1">
            <div style="padding:17px;border:1px solid red;width:400px">
                <div style="padding:10px;">
                    <form action="" onsubmit="javascript:return false">
                        test autocomplete:<input name="textinput" id="textinput" type="text" size="50" />
                        <br/>
                        <input type="submit" value="save"/>
                    </form>
                </div>
            </div>
        </div>

        <script type="text/javascript" charset="utf-8">
            console.log('begin');
            function testRequire0() {
                seajs.use('arale.string-2.0-SNAPSHOT.js', function(str) {
                        console.log('===============');
                        console.log(str.toString());
                        console.log(str('      abc      ').trim());
                        console.log('===============');
                });      
            }
            function testRequire1() {
                seajs.use('arale.dom-2.0-SNAPSHOT.js', function(dom) {
                        console.log('===============');
                        console.log(dom);
                        console.log('===============');
                });      
            }
            function testRequire2() {
                seajs.use(['arale.event-2.0-SNAPSHOT.js', 'arale.dom-2.0-SNAPSHOT.js'], function(E, dom) {
                        console.log('===============');
                        console.log(E);
                        console.log(dom);
                        console.log('===============');
                    E.on(document.body, 'click', function() {
                        console.log('click----1');        
                    }); 
                });      
            }
            function testRequireAraleClass() {
                seajs.use('arale.class-2.0-SNAPSHOT.js', function(d) {
                        arale.declare('declare.b', null, {
                            name: 'declare'
                        });
                        var a = new declare.b();
                        console.log(a.name);

                });
                
            }
            function testRequireAralexBase() {
                seajs.use('aralex.base-2.0-SNAPSHOT.js', function(base) {
                    console.log(aralex.Widget, aralex.TplWidget, aralex.View);        
                    console.log("==============");
                    console.log(base.Widget, base.TplWidget, base.Widget);
                }); 
            }
            function testRequireXbox() {
                seajs.use('aralex.xbox-2.0-SNAPSHOT.js', function(xbox) {
                    x3 = new xbox.StringXbox({
                        value: "<div style=\"margin: 10px;padding: 20px;color: red\">big stringbig stringbig stringbig stringbig stringbig stringbig stringbig string</div>",
                        beforeShow: function(){	
                            console.log("show...");
                            currentBox = this;
                        }
                    });
                    x3.show();
                });
            }
            function testRequireAutocomplete() {
            
                seajs.use(['arale.dom-2.0-SNAPSHOT.js', 'aralex.autocomplete-2.0-SNAPSHOT.js'], function(dom, Autocomplete) {
                    var ac = new Autocomplete({
                        textInput: $('textinput'),
                        datasource: {
                            getData: function(inputValue, callback) {
                                var data = [];
                                
                                if ($S(inputValue).trim().length == 0) {
                                    data = [{value: '请输入数据'}];
                                } else {
                                    console.log("ds get data---->");
                                    for (var i = 0; i < 10; i++) {
                                        data[i] = {value: inputValue+i};
                                    }
                                }
                                if (inputValue == 'e') {
                                    callback.call(null, {items: []});
                                } else {
                                    callback.call(null, {items: data});
                                }
                            }
                        }
                    });
                });
            }
            //testRequireAralexBase();
        </script>
    </body>
</html>
