define("#overlay/0.9.4/overlay",["$","position","iframe-shim","widget"],function(a,b,c){function i(a){return d.contains(document.documentElement,a)}var d=a("$"),e=a("position"),f=a("iframe-shim"),g=a("widget"),h=g.extend({attrs:{width:"",height:"",zIndex:99,id:"",className:"",style:{},visible:!1,align:{selfXY:[0,0],baseElement:e.VIEWPORT,baseXY:[0,0]},parentNode:document.body},render:function(){return h.superclass.render.call(this),this._setPosition(),this._rendered=!0,this},show:function(){return this._rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){this._setupShim()},_setPosition:function(a){if(!i(this.element[0]))return;a||(a=this.get("align"));var b=this.element.is(":hidden");return b&&this.element.css({visibility:"hidden",display:"block"}),e.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:""}),this},_setupShim:function(){var a=new f(this.element);this.after("show hide",a.sync,a);var b=h.prototype.attrs;for(var c in b)if(b.hasOwnProperty(c)){if(c==="parentNode")continue;this.on("change:"+c,a.sync,a)}},_onChangeWidth:function(a){this.element.css("width",a)},_onChangeHeight:function(a){this.element.css("height",a)},_onChangeZIndex:function(a){this.element.css("zIndex",a)},_onChangeId:function(a){this.element.attr("id",a)},_onChangeClassName:function(a,b){this.element.removeClass(b).addClass(a)},_onChangeStyle:function(a){this.element.css(a)},_onChangeAlign:function(a){this._setPosition(a)},_onChangeVisible:function(a){this.element[a===!0?"show":"hide"]()}});c.exports=h});