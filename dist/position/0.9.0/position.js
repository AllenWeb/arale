define("#position/0.9.0/position",["jquery"],function(require,exports,module){var position={},VIEWPORT={_id:"VIEWPORT",nodeType:1},$=require("jquery"),_wrapPinObj=function(a){return a=a||{},a&&a.nodeType===1?{elem:a,x:0,y:0}:{elem:a.elem||VIEWPORT,x:a.x||0,y:a.y||0}},_posConverter=function(pinObj){var pinElem=pinObj.elem!==VIEWPORT?$(pinObj.elem):$(window),_xyConverter=function(x,isX){x+="",x=x.replace(/left/gi,"0%").replace(/center/gi,"50%").replace(/right/gi,"100%"),x=x.replace(/(\d+)px/gi,"$1");if(x.indexOf("%")!==-1){var percents=x.match(/\d+\%/gi);if(percents)for(var i=0;i<percents.length;i++)x=x.replace(percents[i],pinElem["outer"+(isX?"Width":"Height")]()*(parseFloat(percents[i],10)/100)+"")}if(x.indexOf("+")!==-1||x.indexOf("-")!==-1)try{x=eval(x)}catch(ex){}return parseFloat(x,10)};return pinObj.x=_xyConverter(pinObj.x,!0),pinObj.y=_xyConverter(pinObj.y,!1),pinObj};return position.pin=function(a,b){a=_wrapPinObj(a),b=_wrapPinObj(b);var c=$(a.elem),d=b.elem!==VIEWPORT&&$(b.elem),e=0,f=0,g,h;if(a.elem===VIEWPORT)throw new Error("Wrong pin elem.");c.css("position","absolute"),a=_posConverter(a),b=_posConverter(b),g=c.offsetParent()[0]!==document.body?c.offsetParent().offset():{left:0,top:0},$.browser.msie&&$.browser.version==6&&c.offsetParent().css("zoom",1),g.top=g.top+(parseFloat(c.offsetParent().css("border-top-width"),10)||0),g.left=g.left+(parseFloat(c.offsetParent().css("border-left-width"),10)||0),h=d?d.offset():{left:$(document).scrollLeft(),top:$(document).scrollTop()},e=h.top-g.top-a.y+b.y,f=h.left-g.left-a.x+b.x,c.css({left:f,top:e})},position.center=function(a,b){position.pin({elem:a,x:"center",y:"center"},{elem:b,x:"center",y:"center"})},position.VIEWPORT=VIEWPORT,position});