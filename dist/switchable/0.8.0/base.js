define("#switchable/0.8.0/base",["jquery","widget","base","./utils","./plugins/effects","./plugins/autoplay","./plugins/circular"],function(a,b,c){function v(a){var b={};return b.type=a.type,b.target=a.target,{originalEvent:b}}var d=a("jquery"),e=d.makeArray,f=a("widget"),g=a("base"),h=a("./utils"),i=a("./plugins/effects"),j=a("./plugins/autoplay"),k=a("./plugins/circular"),l="display",m="block",n="none",o="forward",p="backward",q="init",r="beforeSwitch",s="switch",t="scrollx",u="scrolly";EVENT_BEFORE_REMOVE="beforeRemove",EVENT_ADDED="added",EVENT_REMOVED="removed",CLS_PREFIX="ar-switchable-",CLS_TRIGGER_INTERNAL=CLS_PREFIX+"trigger-internal",CLS_PANEL_INTERNAL=CLS_PREFIX+"panel-internal";var w=c.exports=f.extend({options:{markupType:0,navCls:CLS_PREFIX+"nav",contentCls:CLS_PREFIX+"content",triggerCls:CLS_PREFIX+"trigger",panelCls:CLS_PREFIX+"panel",triggers:[],panels:[],hasTriggers:!0,triggerType:"mouse",delay:.1,activeTriggerCls:"ar-active",switchTo:0,steps:1,effect:n,duration:500,easing:"easeNone",viewSize:[],events:{}},initOptions:function(a){"markupType"in a||(a.panelCls?a.markupType=Markup.NORMAL:a.panels&&(a.markupType=Markup.FLEXIBLE)),w.superclass.initOptions.call(this,a)},init:function(){this.initMarkup(),this.bindTriggers(),this.trigger(q),this.postCreate()},initMarkup:function(){var a=this.options,b=".",c,f,g=[],h=[],i,j;switch(a.markupType){case 0:c=this.$(b+a.navCls),c&&(g=c.children()),f=this.$(b+a.contentCls),f.length&&(h=f.children());break;case 1:g=this.$(b+a.triggerCls)||[],h=this.$(b+a.panelCls)||[];break;case 2:g=a.triggers||[],h=a.panels||[]}this.panels=e(h),this._initPanels(),this.content=d(f||h[0].parentNode),j=this._resetLength(),c=c||a.hasTriggers&&g[0]&&g[0].parentNode,a.hasTriggers&&(!c||g.length==0)&&(c=this._generateTriggersMarkup(c,j),this.element.append(c),g=c.children()),this.triggers=e(g),this._initTriggers()},_generateTriggersMarkup:function(a,b){var c=this.options,e=a&&a.length>0||d("<ul>"),f,g;e.addClass(c.navCls);for(g=0;g<b;g++)f=d("<li>"),g===this.activeIndex&&f.addClass(c.activeTriggerCls),f.html(g+1),e.append(f);return e},_initTriggers:function(){var a=this.triggers;for(var b=0,c=a.length;b<c;b++)d(a[b]).addClass(CLS_TRIGGER_INTERNAL)},_initPanels:function(){var a=this.panels;for(var b=0,c=a.length;b<c;b++)d(a[b]).addClass(CLS_PANEL_INTERNAL)},postCreate:function(){var a=this.options,b=parseInt(a.switchTo);b>this.panels.length&&(b=0),a.effect!==n&&(h.mix(this,i,!0),this.initEffects()),a.autoplay&&(h.mix(this,j,!0),this.initAutoplay()),a.circular&&(a.effect===t||a.effect===u)&&(h.mix(this,k,!0),this.initCircular()),this.switchTo(b)},bindTriggers:function(){if(!this.options.hasTriggers)return;var a={};a["click ."+CLS_TRIGGER_INTERNAL]=function(a){var b=x(a,this.triggers);this._onFocusTrigger(b,a)},this.options.triggerType==="mouse"&&(a["mouseenter ."+CLS_TRIGGER_INTERNAL]=function(a){var b=x(a,this.triggers);this._onMouseEnterTrigger(b,a)},a["mouseleave ."+CLS_TRIGGER_INTERNAL]=function(){this._onMouseLeaveTrigger()}),this.delegateEvents(a)},_onFocusTrigger:function(a,b){if(!this._triggerIsValid(a))return;this._cancelSwitchTimer(),this.switchTo(a,undefined,v(b))},_onMouseEnterTrigger:function(a,b){var c=this;if(!this._triggerIsValid(a))return;var d=v(b);this.switchTimer=h.later(function(){c.switchTo(a,undefined,d)},c.options.delay*1e3)},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=undefined)},_resetLength:function(){return this.length=this._getLength()},_getLength:function(a){var b=this.options;return a===undefined&&(a=this.panels.length),Math.ceil(a/b.steps)},switchTo:function(a,b,c,d){var e=this.options,f=this.activeIndex,g=this.triggers;return this._triggerIsValid(a)?(this.trigger(r,{fromIndex:f,toIndex:a}),this.fromIndex=f,e.hasTriggers&&this._switchTrigger(f>-1?g[f]:null,g[a]),b===undefined&&(b=a>f?o:p),this.activeIndex=a,this._switchView(b,c,function(){d&&d.call(this)}),this):this},_switchTrigger:function(a,b){var c=this.options.activeTriggerCls;a&&d(a).removeClass(c),d(b).addClass(c)},_getFromToPanels:function(){var a=this.fromIndex,b,c,d=this.options.steps,e=this.panels,f=this.activeIndex;return a>-1?b=e.slice(a*d,(a+1)*d):b=null,c=e.slice(f*d,(f+1)*d),{fromPanels:b,toPanels:c}},_switchView:function(a,b,c){var e=this,f=this._getFromToPanels(),g=f.fromPanels,h=f.toPanels;g&&d(g).css(l,n),d(h).css(l,m),setTimeout(function(){e._fireOnSwitch(b)},0),c&&c.call(this)},_fireOnSwitch:function(a){this.trigger(s,h.mix(a||{},{fromIndex:this.fromIndex,currentIndex:this.activeIndex}))},prev:function(a){this.switchTo((this.activeIndex-1+this.length)%this.length,p,a)},next:function(a){this.switchTo((this.activeIndex+1)%this.length,o,a)},destroy:function(){w.superclass.destroy.call(this,options),this.container.remove(),this.nav=null,this.container=null,this.content=null,this.triggers=[],this.panels=[],this.off(),this.detach(),this.__scrollDetect&&d(win).off("scroll")}}),x=function(a,b){var c=a.currentTarget;return h.indexOf(c,b)}});