define("#switchable/0.9.2/switchable",["jquery","underscore","widget","base","./extra/utils","./plugins/effects","./plugins/autoplay","./plugins/circular"],function(a,b,c){function B(a){return/^\w/.test(a)?v+a:a}var d=a("jquery"),e=a("underscore"),f=a("widget"),g=a("base"),h=a("./extra/utils"),i=a("./plugins/effects"),j=a("./plugins/autoplay"),k=a("./plugins/circular"),l={silent:!0},m="beforeSwitch",n="switch",o=100,p=500,q="display",r="block",s="none",t="forward",u="backward",v=".",w="ui-switchable-",x=w+"nav",y=w+"content",z=w+"trigger-internal",A=w+"panel-internal",C=c.exports=f.extend({attrs:{navClass:null,contentClass:y,triggers:[],panels:[],triggerType:"hover",delay:o,activeTriggerClass:"ui-active",activeIndex:{value:-1,setter:function(a){a=parseInt(a)||0;var b=this.length;return a>b?a=b-1:a<0&&(a=0),a}},step:1,effect:s,easing:"easeNone",duration:p,viewSize:[],plugins:[]},events:function(){var a={};return a["click ."+z]="_onTrigger",this.get("triggerType")==="hover"&&(a["mouseenter ."+z]="_onTrigger",a["mouseleave ."+z]=function(a){a.stopPropagation(),this._cancelSwitchTimer()}),a},initProps:function(){this.delay=parseFloat(this.get("delay"))||o,this.duration=parseFloat(this.get("duration"))||p,this.step=this.get("step")},setup:function(){this._initPanels(),this._initTriggers(),this._bindAction(),this._postCreate()},_bindAction:function(){this.before("_switchTo",function(){var a=["beforeSwitch"].concat([].slice.call(arguments,0));this.trigger.apply(this,a)}),this.after("_switchTo",function(a){this.trigger("switch",a)})},$:function(a){return e.isString(a)&&(a=B(a)),this._parent("$").call(this,a)},_initPanels:function(){var a,b=this.panels=this.$(this.get("panels"));b.length==0&&(a=this.$(this.get("contentClass")),a.length&&(b=this.panels=a.children()));if(!(b.length>0))throw new Error("Switchable init panels error!");this.content=d(b[0].parentNode);for(var c=0,e=b.length;c<e;c++)d(b[c]).addClass(A);this._resetLength()},_initTriggers:function(){var a,b,c,e=this.triggers=this.$(this.get("triggers"));e.length==0?(this.get("navClass")?(a=this.$(this.get("navClass")),e=a.children(),e.length||(c=this.length,a=D.call(this,a,c),this.element.append(a))):a=this.$(x),this.nav=a,e=this.triggers=a.children()):e.length>0&&(this.nav=d(e[0].parentNode));if(e.length)for(b=0,c=e.length;b<c;b++)d(e[b]).addClass(z)},_onTrigger:function(a){a.stopPropagation();var b=a.currentTarget,c=a.type,d=e.indexOf(this.triggers,b);c==="click"?this._onFocusTrigger(d):c==="mouseenter"&&this._onMouseEnterTrigger(d)},_onFocusTrigger:function(a){this._cancelSwitchTimer(),this.set("activeIndex",a)},_onMouseEnterTrigger:function(a){var b=this;this.switchTimer=h.later(function(){b.set("activeIndex",a)},b.delay)},_triggerIsValid:function(a,b){return a!==b},_cancelSwitchTimer:function(){this.switchTimer&&(this.switchTimer.cancel(),this.switchTimer=undefined)},_resetLength:function(){return this.length=this._getLength()},_getLength:function(a){return a===undefined&&(a=this.panels.length),Math.ceil(a/this.step)},_postCreate:function(){var a=parseInt(this.get("activeIndex"));if(a>this.panels.length||a<0)a=0;this._install(i),this._install(j),this._install(k),this.switchTo(a),this._onChangeActiveIndex(a,-1)},_onChangeActiveIndex:function(a,b){var c=a>b?t:u;this._switchTo(a,b,c)},_switchTo:function(a,b,c){return this._triggerIsValid(a,b)?(this._switchTrigger(a,b),this._switchView(a,b,c),this):this},switchTo:function(a){this.set("activeIndex",a)},_switchTrigger:function(a,b){var c=this.triggers;if(c.length<1)return;var e=c[a],f=c[b],g=this.get("activeTriggerClass");f&&d(f).removeClass(g),d(e).addClass(g)},_getFromToPanels:function(a,b){var c,d,e=this.step,f=this.panels,g,h;return b>-1?(g=b*e,h=(b+1)*e,c=f.slice(g,h)):c=null,d=f.slice(a*e,(a+1)*e),{fromPanels:c,toPanels:d}},_switchView:function(a,b,c){var e=this,f=this._getFromToPanels(a,b),g=f.fromPanels,h=f.toPanels;g&&d(g).css(q,s),d(h).css(q,r)},prev:function(){var a=this.get("activeIndex"),b=(a-1+this.length)%this.length;this.set("activeIndex",b,l),this._switchTo(b,a,u)},next:function(){var a=this.get("activeIndex"),b=(a+1)%this.length;this.set("activeIndex",b,l),this._switchTo(b,a,t)},_parent:function(a){return C.superclass[a]},_install:function(a){var b=a.attrs;if(b)for(var c in b)b.hasOwnProperty(c)&&(this.get(c)||this.set(c,b[c],l));a.methods&&e.extend(this,a.methods),a.install&&a.install.call(this),this.get("plugins").push(a)},destroy:function(){var a=this.get("plugins"),b;for(var c=0,d=a.length;c<d;c++)b=a[c],b.destroy&&b.destroy.call(this);this.nav=null,this.content=null,this.triggers=[],this.panels=[],this.off(),C.superclass.destroy.call(this)}}),D=function(a,b){var c=this.activeIndex;a.length||(a=d("<ul>"),a.addClass(this.get("navClass")),this.element.append(a));var e,f;for(f=0;f<b;f++)e=d("<li>"),f===c&&e.addClass(this.get("activeTriggerClass")),e.html(f+1),a.append(e);return a}});