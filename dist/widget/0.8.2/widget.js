define("#widget/0.8.2/widget",["base","$","./daparser"],function(a,b,c){function l(a){return k.call(a)==="[object String]"}function m(a){return k.call(a)==="[object Function]"}function n(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function p(a,b){var c=q(a,b.cid),d;return(d=o[c])?d:(d=function(c){m(a)?a.call(b,c):b[a](c)},o[c]=d,d)}function q(a,b){if(l(a))return b+"-"+a;if(m(a)&&m(a.toString))return a.toString().substring(0,50);throw'"handler" must be a string or a function'}function s(){return"widget-"+r++}function t(a,b){var c=0,d=g.length,e;for(;c<d;c++)e=g[c],b[e]&&(a[e]=b[e])}function u(a,b){for(var c in a){var d=n(c).split(/\s*,\s*/),e=a[c];while(c=d.shift()){var f=c.split(/\s+/),g=f[0],h=f[1];h||(h=g,g="click"),b[g+" "+e]=h}}}function v(a){return m(a.events)&&(a.events=a.events()),a.events}function w(a,b){var c=a.match(h);return{type:c[1]+i+b,selector:c[2]||null}}var d=a("base"),e=a("$"),f=a("./daparser"),g=["element","model"],h=/^(\S+)\s*(.*)$/,i=".delegate-events-",j=d.extend({options:{events:null,template:"<div></div>",parentNode:document.body,"data-api":!0},initialize:function(a){this.cid=s(),this.initOptions(a),this.parseElement(),this.parseDataAttrs(),this.delegateEvents(),this.init()},initOptions:function(a){var b=this.constructor.prototype;b.options||(b.options={}),t(b.options,this),a=this.setOptions(a).options,t(this,a)},parseElement:function(){var a=this.element;a?this.element=a instanceof e?a:e(a):this.options.template&&this.parseElementFromTemplate();if(!this.element[0])throw"element is invalid"},parseElementFromTemplate:function(){this.element=e(this.options.template)},parseDataAttrs:function(){if(this.options["data-api"]){this.dataset=f.parse(this.element[0]);var a=this.dataset.action;if(a){var b=v(this)||(this.events={});u(a,b)}}},delegateEvents:function(a,b){a||(a=v(this));if(!a)return;if(l(a)&&m(b)){var c={};c[a]=b,a=c}for(var d in a){var e=w(d,this.cid);b=p(a[d],this),this.element.on(e.type,e.selector,b)}return this},undelegateEvents:function(a,b){var c=this.cid,d={};arguments.length===0?d.type=i+c:d=w(a,c);if(b){var e=q(b,c);b=o[e]}return this.element.off(d.type,d.selector,b),this},init:function(){},render:function(){var a=this.element[0].parentNode||{nodeType:11};return a.nodeType===11&&this.options.parentNode&&this.element.appendTo(this.options.parentNode),this},$:function(a){return this.element.find(a)},uniqueClass:function(a){return a=a instanceof e?a:e(a),"."+f.uniqueClass(a[0])},destroy:function(){this.undelegateEvents(),j.superclass.destroy.call(this)}});c.exports=j;var k=Object.prototype.toString,o={},r=0});