define("#widget/0.8.1/widget",["base","$","./daparser","./template"],function(a,b,c){function m(a){return l.call(a)==="[object String]"}function n(a){return l.call(a)==="[object Function]"}function o(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function q(a,b){var c=r(a,b.cid),d;return(d=p[c])?d:(d=function(c){n(a)?a.call(b,c):b[a](c)},p[c]=d,d)}function r(a,b){if(m(a))return b+"-"+a;if(n(a)&&n(a.toString))return a.toString().substring(0,50);throw'"handler" must be a string or a function'}function t(){return"widget-"+s++}function u(a,b){var c=0,d=h.length,e;for(;c<d;c++)e=h[c],b[e]&&(a[e]=b[e])}function v(a,b){for(var c in a){var d=o(c).split(/\s*,\s*/),e=a[c];while(c=d.shift()){var f=c.split(/\s+/),g=f[0],h=f[1];h||(h=g,g="click"),b[g+" "+e]=h}}}function w(a){return n(a.events)&&(a.events=a.events()),a.events}function x(a,b){var c=a.match(i);return{type:c[1]+j+b,selector:c[2]||null}}var d=a("base"),e=a("$"),f=a("./daparser"),g=a("./template"),h=["element","model"],i=/^(\S+)\s*(.*)$/,j=".delegate-events-",k=d.extend({options:{events:null,template:"<div></div>",parentNode:document.body,"data-api":!0},initialize:function(a){this.cid=t(),this.initOptions(a),this.parseElement(),this.parseDataAttrs(),this.delegateEvents(),this.init()},initOptions:function(a){var b=this.constructor.prototype;b.options||(b.options={}),u(b.options,this),a=this.setOptions(a).options,u(this,a)},parseElement:function(){var a=this.element;a?this.element=a instanceof e?a:e(a):this.options.template&&this.parseElementFromTemplate();if(!this.element[0])throw"element is invalid"},parseElementFromTemplate:function(){this.element=e(this.options.template)},parseDataAttrs:function(){if(this.options["data-api"]){this.dataset=f.parse(this.element[0]);var a=this.dataset.action;if(a){var b=w(this)||(this.events={});v(a,b)}}},delegateEvents:function(a,b){a||(a=w(this));if(!a)return;if(m(a)&&n(b)){var c={};c[a]=b,a=c}for(var d in a){var e=x(d,this.cid);b=q(a[d],this),this.element.on(e.type,e.selector,b)}return this},undelegateEvents:function(a,b){var c=this.cid,d={};arguments.length===0?d.type=j+c:d=x(a,c);if(b){var e=r(b,c);b=p[e]}return this.element.off(d.type,d.selector,b),this},init:function(){},render:function(){var a=this.element[0].parentNode||{nodeType:11};return a.nodeType===11&&this.options.parentNode&&this.element.appendTo(this.options.parentNode),this},$:function(a){return this.element.find(a)},uniqueClass:function(a){return a=a instanceof e?a:e(a),"."+f.uniqueClass(a[0])},destroy:function(){this.undelegateEvents(),k.superclass.destroy.call(this)}});k.Template=g,c.exports=k;var l=Object.prototype.toString,p={},s=0});