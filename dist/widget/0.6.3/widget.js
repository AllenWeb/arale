define("#widget/0.6.3/widget",["base","$","./daparser"],function(a,b,c){function k(){return"widget-"+j++}function l(a,b){return!a||!a[b]?null:o(a[b])?a[b]():a[b]}function m(a,b){var c=0,d=g.length,e;for(;c<d;c++)e=g[c],b[e]&&(a[e]=b[e])}function o(a){return n.call(a)==="[object Function]"}function p(a,b){return function(c){a.call(b,c)}}var d=a("base"),e=a("$"),f=a("./daparser"),g=["element","model"],h=/^(\S+)\s*(.*)$/,i=d.extend({options:{template:"<div></div>","data-api":!0},initialize:function(a){this.cid=k(),this.initOptions(a),this.parseElement(),this.parseDataAttrs(),this.delegateEvents(),this.init()},initOptions:function(a){var b=this.constructor.prototype;b.options||(b.options={}),m(b.options,this),a=this.setOptions(a).options,m(this,a)},parseElement:function(){var a=this.element,b=this.options.template;a?this.element=a instanceof e?a:e(a):b&&(this.element=e(b));if(!this.element)throw"element is invalid"},parseDataAttrs:function(){this.options["data-api"]&&(this.dataset=f.parse(this.element[0]),this._parseDataActions())},_parseDataActions:function(){var a=this.dataset.action;if(!a)return;var b=this.events||(this.events={});for(var c in a){var d=c.split(/\s+/),e=d[0],f=d[1];f||(f=e,e="click");var g=a[c];b[e+" "+g]=f}},delegateEvents:function(a){a||(a=l(this,"events"));if(!a)return;this.undelegateEvents();for(var b in a){var c=a[b];o(c)||(c=this[c]);if(!c)throw'Method "'+a[b]+'" does not exist';var d=b.match(h),e=d[1],f=d[2]||null;e+=".delegateEvents"+this.cid,this.element.on(e,f,p(c,this))}},undelegateEvents:function(){this.element.off(".delegateEvents"+this.cid)},init:function(){},render:function(){return this},$:function(a){return this.element.find(a)},destroy:function(){i.superclass.destroy.call(this),this.undelegateEvents()}});c.exports=i;var j=0,n=Object.prototype.toString});